name: Deploy-wagtail

# глобальные переменные будут видны везде - в любых моих джобах
env: 
  APPLICATION_NAME   : "myWagtailApp"
  SHA_COMMIT         : "deploy version - ${{github.sha}}" 

on:
  push:
    branches: 
    - main

jobs:
  my-testing:
  
    # запускаем на ubuntu
    runs-on: ubuntu-latest
    
    # команды
    steps:
        # название команды
      - name: Print my testing
        # сама команда
        run: echo "Hello test 1"
      - name: Versions commit
      # с помощью | запускаю несколько команд
        run: | 
          echo "commands 1"
          echo "commands 2"
          echo "name: ${{ env.APPLICATION_NAME }}"

  my-testing-2:
    # запускаем на ubuntu
    runs-on: ubuntu-latest
    needs: [my-testing] #этот джоб my-testing-2 запустится только после того как отработает my-testing - первый джоб 
    
    # команды
    steps:
        # название команды
      - name: Print my testing 2 after needs
        # сама команда
        run: echo "Hello test 2"
      - name: Geting commit number
        run: | 
          echo "commit number: ${{ env.SHA_COMMIT }}"
